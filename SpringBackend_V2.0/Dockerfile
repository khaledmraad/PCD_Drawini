FROM maven:3.8.5-openjdk-17

WORKDIR /jaava-app

COPY . .

ENV SPRING_DATASOURCE_URL jdbc:postgresql://4.180.6.234:5432/pcd
ENV SPRING_DATASOURCE_USERNAME khaled
ENV SPRING_DATASOURCE_PASSWORD 1234
ENV SPRING_DATASOURCE_DRIVER_CLASS_NAME org.postgresql.Driver
ENV SPRING_JPA_HIBERNATE_DDL_AUTO create-drop
ENV SPRING_JPA_SHOW_SQL true
ENV SPRING_JPA_PROPERTIES_HIBERNATE_FORMAT_SQL true
ENV SPRING_JPA_DATABASE postgresql
ENV SPRING_JPA_DATABASE_PLATFORM org.hibernate.dialect.PostgreSQLDialect
ENV SPRING_MAIL_HOST smtp.gmail.com
ENV SPRING_MAIL_PORT 587
ENV SPRING_MAIL_USERNAME khaled.mrad@ensi-uma.tn
ENV SPRING_MAIL_PASSWORD "pywh domh rlsd vezm"
ENV SPRING_MAIL_PROPERTIES_MAIL_SMTP_SSL_TRUST "*"
ENV SPRING_MAIL_PROPERTIES_MAIL_SMTP_AUTH true
ENV SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_ENABLE true
ENV SPRING_MAIL_PROPERTIES_MAIL_SMTP_CONNECTION_TIMEOUT 5000
ENV SPRING_MAIL_PROPERTIES_MAIL_SMTP_TIMEOUT 3000
ENV SPRING_MAIL_PROPERTIES_MAIL_SMTP_WRITE_TIMEOUT 5000



RUN mvn clean  -Dmaven.test.skip=true install



CMD mvn spring-boot:run
